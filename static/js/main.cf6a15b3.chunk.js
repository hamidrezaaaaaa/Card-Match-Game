(this["webpackJsonpcard-match-game"]=this["webpackJsonpcard-match-game"]||[]).push([[0],{28:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),c=a(12),s=a.n(c),i=a(2),o=a(7),u=a(5),d=a.n(u),b=a(8),l=a(6),j=a(4),f=a(14),O=a.n(f),h=150,m=250,p="IN_PROGRESS",x="LOADING",v="CREATING",g="FINISHED",k="SELECTED",w="MATCHED",C="HIDDEN",y=Object(o.a)({card:{padding:5,borderRadius:5,height:m,width:h,border:"black 5px solid",position:"relative",transition:"all 0.4s linear",transformStyle:"preserve-3d",margin:"5px","& div":{position:"absolute",backfaceVisibility:"hidden"}},selected:{borderColor:"blue",transform:"rotateY(180deg)"},front:{transform:"rotateY(180deg)"},matched:{borderColor:"green",backgroundColor:"white",transform:"rotateY(180deg)"},back:{transform:"rotateY(180deg)",top:"25%",left:"35%"}}),S=function(t){var e,a=t.data,c=t.handleClick,s=t.index,o=Object(r.useState)(!1),u=Object(i.a)(o,2),d=u[0],b=u[1],j=a.id,f=a.url,h=a.status,m=y(),p=h===k,x=h===w;return Object(n.jsxs)("div",{className:O()(m.card,(e={},Object(l.a)(e,m.selected,p),Object(l.a)(e,m.matched,x),e)),onClick:function(){h===C&&c(s,j)},children:[Object(n.jsx)("div",{className:m.front,children:Object(n.jsx)("img",{src:f,alt:"card",onLoad:function(){b(!0)}})}),a.id,Object(n.jsx)("div",{className:m.back,children:!d&&"Loading"})]})},N="https://picsum.photos",E=function(){var t=Object(b.a)(d.a.mark((function t(){var e,a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M();case 2:for(e=t.sent,a=e.concat(e);a.length>15;)a.pop();return n=a.sort((function(){return.5-Math.random()})),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object(b.a)(d.a.mark((function t(e){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(N,"/v2/list?page=").concat(e,"&limit=100"),t.next=3,fetch(a);case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(b.a)(d.a.mark((function t(){var e,a,n,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],a=new Set,n=Math.floor(10*Math.random())+1,t.next=5,I(n);case 5:for(r=t.sent;a.size<Math.ceil(7.5);)c=Math.floor(Math.random()*r.length)+1,r[c]&&(s=r[c].id,a.has(s)||(a.add(s),e.push({id:s,url:"".concat(N,"/id/").concat(s,"/").concat(h,"/").concat(m),status:C})));return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=E,G=Object(o.a)({board:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",justifyItems:"center"}}),R=function(t){var e=t.gameStatus,a=t.onGameUpdate,c=Object(r.useState)({}),s=Object(i.a)(c,2),o=s[0],u=s[1],f=Object(r.useState)(!1),O=Object(i.a)(f,2),h=O[0],m=O[1],y=Object(r.useState)(null),N=Object(i.a)(y,2),E=N[0],I=N[1],M=Object(r.useState)(null),R=Object(i.a)(M,2),T=R[0],A=R[1],L=Object(r.useState)(0),Y=Object(i.a)(L,2),z=Y[0],H=Y[1],F=Object(r.useRef)(0),J=Object(r.useState)(null),P=Object(i.a)(J,2),U=P[0],B=P[1],K=G(),V=Object(r.useCallback)((function(){if(E&&T){var t,e=Object(j.a)({},o[E.index]),a=Object(j.a)({},o[T.index]);E.id===T.id?(e.status=w,a.status=w):(e.status=C,a.status=C);var n=Object(j.a)(Object(j.a)({},o),{},(t={},Object(l.a)(t,E.index,e),Object(l.a)(t,T.index,a),t));setTimeout((function(){u(n)}),800),setTimeout(_,800)}}),[o,E,T]),_=function(){I(null),A(null),m(!1)},q=function(t,e){if(!h&&(F.current++,z<2)){var a=z+1,n={index:t,id:e};H(a),1===a?I(n):(A(n),m(!0)),function(t,e){var a=Object(j.a)({},o),n=Object(j.a)({},a[t]);n.status=e,a[t]=n,u(a)}(t,k)}},Q=Object(r.useCallback)((function(){u((function(t){var e=Object.keys(o).find((function(t){return o[t].status===C}));if(e){var a=Object(j.a)(Object(j.a)({},o[e]),{},{status:k});return Object(j.a)(Object(j.a)({},o),{},Object(l.a)({},e,a))}return t}))}),[o]),W=Object(r.useCallback)((function(){(console.log(F.current),0===z)?14===Object.keys(o).filter((function(t){return o[t].status===w})).length&&a(g,{flips:F.current,time:"".concat((new Date-U)/1e3," seconds")}):2===z&&(H(0),V())}),[V,o,z,a,U]),X=Object(r.useCallback)(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(x),t.t0=u,t.next=4,D();case 4:t.t1=t.sent,(0,t.t0)(t.t1),F.current=0,B(new Date),a(p);case 9:case"end":return t.stop()}}),t)}))),[a]);return Object(r.useEffect)((function(){console.log(e),e===v?X():e===p?W():e===g&&Q()}),[W,X,Q,e]),Object(n.jsx)("div",{className:K.board,children:e===x?"Loading...":Object.entries(o).map((function(t){var e=Object(i.a)(t,2),a=e[0],r=e[1];return Object(n.jsx)(S,{index:a,data:r,handleClick:q},a)}))})},T=Object(o.a)({root:{position:"fixed",display:"grid",top:"30%",left:"25%",width:"50%",height:200,background:"aliceblue",justifyItems:"center",alignItems:"center"},button:{background:"white",border:"solid 1px black",padding:"1em 2em"}}),A=function(t){var e=t.onReset,a=t.results,r=T();return Object(n.jsxs)("div",{className:r.root,children:[Object(n.jsx)("div",{children:"Congratulations, you've won!"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Cards flipped:"}),a.flips," times"]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"Time taken:"})," ",a.time]})]}),Object(n.jsx)("button",{className:r.button,onClick:function(){e(v)},children:"Play Again"})]})},L=Object(o.a)({header:{textAlign:"center"},footer:{textAlign:"center"},root:{fontFamily:"arial"}}),Y=function(){var t=Object(r.useState)(v),e=Object(i.a)(t,2),a=e[0],c=e[1],s=Object(r.useState)({}),o=Object(i.a)(s,2),u=o[0],d=o[1],b=L(),l=function(t,e){c(t),t===g&&d(e)};return Object(n.jsxs)("div",{className:b.root,children:[Object(n.jsx)("header",{className:b.header,children:Object(n.jsx)("h1",{children:"Card Match Game"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(R,{gameStatus:a,onGameUpdate:l}),a===g&&Object(n.jsx)(A,{onReset:l,results:u})]}),Object(n.jsxs)("footer",{className:b.footer,children:["Created by ",Object(n.jsx)("a",{href:"https://www.kazyamada.com/",children:"Kaz Yamada"})," |"," ",Object(n.jsx)("a",{href:"https://github.com/kaz-yamada/Card-Match-Game",children:"Source"})]})]})};s.a.render(Object(n.jsx)(Y,{}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.cf6a15b3.chunk.js.map